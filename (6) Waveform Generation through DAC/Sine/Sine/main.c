/*
 * Sine.c
 *
 * Created: 27-01-2025 14:28:44
 * Author : ssart
 */ 

// Sine wave in C
#include <avr/io.h>
#define F_CPU 1000000
#include <util/delay.h>
int main(void)
{
	DDRC=0xFF;
	int i;
	int a[]={127,   130,   133,   136,   139,   143,   146,   149,
		152,   155,   158,   161,   164,   167,   170,   173,   176,   179,
		181,   184,   187,   190,   193,   195,   198,   200,   203,   205,
		208,   210,   213,   215,   217,   219,   221,   223,   225,   227,
		229,   231,   233,   235,   236,   238,   239,   241,   242,   243,
		245,   246,   247,   248,   249,   250,   250,   251,   252,   252,
		253,   253,   253,   254,   254,   254,   254,   254,   254,   254,
		253,   253,   252,   252,   251,   251,   250,   249,   248,   247,
		246,   245,   244,   243,   241,   240,   239,   237,   235,   234,
		232,   230,   228,   226,   224,   222,   220,   218,   216,   214,
		211,   209,   207,   204,   202,   199,   196,   194,   191,   188,
		186,   183,   180,   177,   174,   171,   168,   166,   163,   159,
		156,   153,   150,   147,   144,   141,   138,   135,   132,   129,
		125,   122,   119,   116,   113,   110,   107,   104,   101,    98,
		95,    91,    88,    86,    83,    80,    77,    74,    71,    68,
		66,    63,    60,    58,    55,    52,    50,    47,    45,    43,
		40,    38,    36,    34,    32,    30,    28,    26,    24,    22,
		20,    19,    17,    15,    14,    13,    11,    10,     9,     8,
		7,     6,     5,     4,     3,     3,     2,     2,     1,     1,
		0,     0,     0,     0,     0,     0,     0,     1,     1,     1,
		2,     2,     3,     4,     4,     5,     6,     7,     8,     9,
		11,    12,    13,    15,    16,    18,    19,    21,    23,    25,
		27,    29,    31,    33,    35,    37,    39,    41,    44,    46,
		49,    51,    54,    56,    59,    61,    64,    67,    70,    73,
		75,    78,    81,    84,    87,    90,    93,    96,    99,   102,
	105,   108,   111,   115,   118,   121,   124,   127};
	while (1)
	{
		for(i=0;i<256;i++)
		{
			PORTC=a[i];
		}
	}
}

/*.INCLUDE "M32DEF.INC" 
.ORG 0x0000
LDI R16,HIGH(RAMEND) 
OUT SPH,R16 
LDI R16,LOW(RAMEND) 
OUT SPL,R16
LDI R16,0xFF 
OUT DDRC,R16

LDI R31,HIGH(data<<1) ;// For higher byte of register pair Z 
LDI R30,LOW(data<<1) ;// For lower byte of register pair Z
MAIN: LPM R16,Z+ 
	  OUT PORTC,R16 
	  CPI R30,0x33 
	  BRNE MAIN 
	  LDI R30,LOW(data<<1)
	  JMP MAIN


.ORG 0x0400 
data: .dB 0x7F, 0x8F, 0x9E, 0xAD, 0xBB, 0xC8, 0xD5, 0xDF, 0xE9, 0xF1, 0xF7, 0xFB, 0xFD, 0xFE, 0xFC, 0xF9, 0xF4, 0xED, 0xE4, 0xDA, 0xCF, 0xC2, 0xB4, 0xA6, 0x96, 0x87, 0x77, 0x68, 0x58, 0x4A, 0x3C, 0x2F, 0x24, 0x1A, 0x11, 0x0A, 0x05, 0x02, 0x00, 0x01, 0x03, 0x07, 0x0D, 0x15, 0x1F, 0x29, 0x36, 0x43, 0x51, 0x60, 0x6F, 0x7F*/
